{% extends "base.html" %}

{% block title %}Eventos Disponibles{% endblock %}

{% block content %}
<main id="app" class="container mx-auto mt-8">
  <!-- Botón para Sugerencias -->
  <div class="flex justify-end mb-4">
    <a href="{{ url_for('controllers.sugerencias_evento') }}" 
       class="bg-blue-500 text-white py-2 px-4 rounded hover:bg-blue-600">
      Sugerencias de Eventos
    </a>
  </div>

  <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
    <!-- Tarjetas dinámicas -->
    <div v-for="evento in eventos" :key="evento.id_evento" class="perspective">
      <div class="relative h-48 w-full card">
        <!-- Frente de la tarjeta -->
        <div class="card-front bg-blue-500 text-white flex items-center justify-center shadow-lg">
          <h3 class="text-xl font-bold">[[ evento.nombre ]]</h3>
        </div>
        <!-- Parte trasera de la tarjeta -->
        <div class="card-back bg-gray-800 text-white flex flex-col items-center justify-center shadow-lg">
          <p><strong>Fecha:</strong> [[ evento.fecha ]]</p>
          <p><strong>Hora:</strong> [[ evento.hora ]]</p>
          <p><strong>Lugar:</strong> [[ evento.lugar ]]</p>
          <p v-if="evento.presupuesto"><strong>Presupuesto:</strong> $[[ evento.presupuesto ]]</p>
        </div>
      </div>
    </div>
  </div>
</main>

<script src="https://cdn.jsdelivr.net/npm/vue@2"></script>
<script>
  new Vue({
    el: '#app',
    delimiters: ['[[', ']]'], // Cambiar delimitadores para evitar conflictos con Jinja2
    data: {
      eventos: [], // Datos de eventos
    },
    methods: {
      async fetchEventos() {
        try {
          const response = await fetch('/api/eventos');
          if (!response.ok) throw new Error('Error al obtener eventos');
          const data = await response.json();
          this.eventos = data;
        } catch (error) {
          console.error('Error al cargar eventos:', error);
        }
      },
    },
    mounted() {
      this.fetchEventos();
    },
  });
</script>
{% endblock %}
